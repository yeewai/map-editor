# Ever-Modal

* A Higher Order Component using react-redux to keep modal state in a Redux store. Also checks for dirty redux-form forms before closing.
* link to confluence page

## Getting Started

### System Requirements/Dependencies
* ``React ^16.2.0``
* ``Redux ^3.7.2``
* ``Redux Form ^7.2.1``
* ``React Modal``?

### Installation

```
npm install --save redux-form
npm install --save ever-modal
```

### Configuring your react/redux app

#### Import CSS

* ``@import './vendor/node_modules/ever-modal/build/styles/modal.css';``

#### Modal Root
```
import { ModalRoot, ConfirmModal } from 'ever-modal';
import SomeOtherModalDefinedInThisApp from './modalComponents/...';

const App = () => {
    const modal_components = {
            'SOME_OTHER_MODAL': SomeOtherModalDefinedInThisApp,
            ...
        };

        return (
            <div className="App">
                ...
                ... main app content
                ...
                <ModalRoot modal_components={modal_components}/>
                <ModalRoot modal_components={{ 'CONFIRM_MODAL': ConfirmModal }}/>
                ...
            </div>
        );
}
```
* Import ModalRoot into the root app component and pass in whichever modal components
* Multiple modalRoots can be used to stack modals on top of each other
    * Modals should not be passed to multiple layers
* Confirm Modal ( used for confirming before leaving redux-forms and should be the last ModalRoot defined )
    * ``import { confirmModal } from 'ever-modal';``
    * ``<ModalRoot modal_components={{ 'CONFIRM_MODAL': confirmModal }}/>``

#### Opening Modals
Modals can be opened using the helpful OpenModalButton component.
```
import {OpenModalButton } from 'ever-modal';

<OpenModalButton modalType="SOME_MODAL" modalProps={{ariaLabel: "Some helpful label"}} >Open Modal</OpenModalButton>
```

Or alternatively, if you want to customize the styling and component beyond a bootstrap button, you can dispatch the action
```
import { modalActions } from 'ever-modal';

dispatch(modalActions.showModal(modalType, modalProps))
```

##### Hiding Modals
```
import { modalActions } from 'ever-modal';

dispatch(modalActions.hideModal());
```

#### Modal Components

```
import Modal from 'ever-modal';

const modalContent = ({modalType}) => {
    return (
        <Modal modalType={modalType} contentLabel="Modal" className="modal-md" >
            <div className="modal-body">
                <p>Sup</p>
            </div>
        </Modal>
    );
};

```

##### Modal Components with forms

The confirm dialog can be triggered by passing in the matching formName to modalProps when dispatching the action. The ConfirmModal ModalRoot must be defined to work!!
```
<OpenModalButton modalType="SOME_MODAL" modalProps={{ariaLabel: "Some helpful label", formName: "someForm"}} >Open Form Modal</OpenModalButton>
```

## Running the tests

```npm run test```

## Deployment

Update the package.json version number and then publish using ``npm run publish-private``


## Versioning

We use [SemVer](http://semver.org/) for versioning.
