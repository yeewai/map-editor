'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _enzyme = require('enzyme');

var _enzyme2 = _interopRequireDefault(_enzyme);

var _enzymeAdapterReact = require('enzyme-adapter-react-16');

var _enzymeAdapterReact2 = _interopRequireDefault(_enzymeAdapterReact);

var _reactDom = require('react-dom');

var _reactModal = require('react-modal');

var _reactModal2 = _interopRequireDefault(_reactModal);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _reduxMockStore = require('redux-mock-store');

var _reduxMockStore2 = _interopRequireDefault(_reduxMockStore);

var _ConfirmModal = require('./ConfirmModal');

var _ConfirmModal2 = _interopRequireDefault(_ConfirmModal);

var _index = require('../index');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var mockStore = (0, _reduxMockStore2.default)([]);
_enzyme2.default.configure({ adapter: new _enzymeAdapterReact2.default() });

describe("Confirm Modals", function () {
    var successSpy = _sinon2.default.spy();
    var hideModalSpy = _sinon2.default.spy(_index.modalActions, "hideModal");
    var store = mockStore({
        program: { item: { app_copy: {} } },
        modals: {
            "CONFIRM_MODAL": {
                visible: true,
                modalProps: {
                    message: "Sup",
                    onSuccess: successSpy
                }
            }
        }
    });
    var wrapper = (0, _enzyme.mount)(_react2.default.createElement(
        _reactRedux.Provider,
        { store: store },
        _react2.default.createElement(_ConfirmModal2.default, { modalType: "CONFIRM_MODAL" })
    ));
    var portalWrapper = wrapper.find('ModalPortal');

    it("should just close the modal if hitting cancel", function () {
        portalWrapper.find('.cancel-btn').simulate('click');

        expect(hideModalSpy.called).toBe(true);
    });

    it("should perform the onsuccess function if hitting confirm", function () {
        portalWrapper.find('.confirm-btn').simulate('click');
        expect(successSpy.called).toBe(true);
    });
});